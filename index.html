<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Lububu</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="/favicon.png" type="image/png" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Delius&family=Russo+One&family=Sour+Gummy:wght@400;700&display=swap"
    rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>

<body>
  <div class="bg-icons">
    <img src="images/example.jpg" alt="ID" />
    <img src="images/example.jpg" alt="ID" />
    <img src="images/example.jpg" alt="ID" />
    <img src="images/example.jpg" alt="ID" />
    <img src="images/example.jpg" alt="ID" />
    <img src="images/example.jpg" alt="ID" />
    <img src="images/example.jpg" alt="ID" />
    <img src="images/example.jpg" alt="ID" />
  </div>

  <header class="header">
    <img src="/images/monster-logo-white.png" class="logo" alt="lububu" />
    <h1 class="main-title">LUBUBU</h1>
    <div class="ca-container" style="display: inline-flex; align-items: center; gap: 10px;">
      <p class="ca ca-text" id="ca-text">CA:ENznRBqJRqkPjSXbvq5eFD67VfLsnFwsq8dVQj9bonk</p>
      <button id="copyCaBtn"
        style="padding: 4px 8px; background: white; color: black; border: none; cursor: pointer; font-weight: bold; border-radius:20px">Copy</button>
    </div>
  </header>

  <main>
    <div id="loading-warning" class="pulse-warning"
      style="display:none; color: white; font-weight: bold; text-align: center; margin-bottom: 1em;">
      ‚ö†Ô∏è Image generating... please wait!
    </div>

    <form id="lububuForm" class="id-form">
      <div class="form-row">
        <label>Gender:<select id="gender">
            <option>Male</option>
            <option>Female</option>
            <option>Other</option>
          </select></label>
        <label>Teeth Type:<select id="teeth">
            <option>Sharp</option>
            <option>Goofy</option>
            <option>Square</option>
            <option>Missing</option>
            <option>Oversized</option>
          </select></label>
      </div>

      <div class="form-row">
        <label>Fur Color:<select id="furColor">
            <option>Red</option>
            <option>White</option>
            <option>Baby Blue</option>
            <option>Baby Pink</option>
            <option>Purple</option>
            <option>Teal</option>
            <option>Multicolored</option>
            <option>Striped</option>
          </select></label>
        <label>Eye Color:<select id="eyes">
            <option>Blue</option>
            <option>Green</option>
            <option>Black</option>
            <option>Yellow</option>
            <option>Mismatched</option>
          </select></label>
      </div>

      <div class="form-row">
        <label>Mood / Style:<select id="mood">
            <option>Happy</option>
            <option>Evil</option>
            <option>Angry</option>
            <option>Goofy</option>
            <option>Shy</option>
            <option>Excited</option>
            <option>Gremlin like</option>
          </select></label>
        <label>Tail Type:<select id="tail">
            <option>None</option>
            <option>Short Stubby</option>
            <option>Long Bushy</option>
            <option>Dragon</option>
          </select></label>
      </div>

      <div class="form-row">
        <label>Accessories:<select id="accessories">
            <option>Bowtie</option>
            <option>Cape</option>
            <option>Satchel</option>
            <option>Crown</option>
            <option>Hoodie</option>
            <option>Pacifier</option>
          </select></label>
        <label>Clothes:<select id="clothes">
            <option>Nothing</option>
            <option>Dress</option>
            <option>Dungarees</option>
            <option>Baby Grow</option>
            <option>Shorts</option>
          </select></label>
      </div>

      <p class="img-or-upload">add your own pic</p>
      <button type="button" id="generateLububu" style="background:#89CFF0; color:black; font-weight:bold;">üé® Generate
        Lububu</button>
      <label><input type="file" id="photo" accept="image/*" /></label>
      <button type="submit" style="background:#89CFF0; color:black; font-weight:bold;">Make Lububu From Own
        Image</button>
    </form>

    <img id="lububuImage" src="" alt="Your Lububu"
      style="display:none; margin: 1em auto; max-width: 300px; border: 2px solid #89CFF0; border-radius: 12px;" />

    <footer class="footer" style="margin-top: 2em; text-align: center;">
      <button
        style="background:#89CFF0; color:black; font-weight:bold; padding: 10px 20px; margin: 10px; border:none; border-radius: 6px; cursor:pointer;">18+
        COMMUNITY</button>
      <button
        style="background:#89CFF0; color:black; font-weight:bold; padding: 10px 20px; margin: 10px; border:none; border-radius: 6px; cursor:pointer;">BUY
        18+</button>
    </footer>

    <script>
      window.addEventListener("DOMContentLoaded", () => {
        const form = document.getElementById("lububuForm");
        const photo = document.getElementById("photo");
        const generateBtn = document.getElementById("generateLububu");
        const imgEl = document.getElementById("lububuImage");

        function getValues() {
          return {
            gender: document.getElementById("gender").value,
            teeth: document.getElementById("teeth").value,
            furColor: document.getElementById("furColor").value,
            eyes: document.getElementById("eyes").value,
            mood: document.getElementById("mood").value,
            tail: document.getElementById("tail").value,
            accessories: document.getElementById("accessories").value,
            clothes: document.getElementById("clothes").value
          };
        }

        generateBtn.addEventListener("click", async () => {
          const vals = getValues();
          const prompt = `A stylized plush creature inspired by the Labubu toy line. Gender: ${vals.gender}, Teeth: ${vals.teeth}, Fur: ${vals.furColor}, Eyes: ${vals.eyes}, Mood: ${vals.mood}, Tail: ${vals.tail}, Accessories: ${vals.accessories}, Clothes: ${vals.clothes}. Studio lighting, white background, toy figure.`;
          console.log("Generating Lububu with prompt:", prompt);
          // Optional: fetch DALL¬∑E image here and assign to imgEl.src
        });

        form.addEventListener("submit", (e) => {
          e.preventDefault();
          const vals = getValues();
          if (photo.files.length) {
            const file = photo.files[0];
            const reader = new FileReader();
            reader.onload = () => {
              imgEl.src = reader.result;
              imgEl.style.display = "block";
            };
            reader.readAsDataURL(file);
          } else {
            alert("Please upload an image.");
          }
        });

        // GSAP: Logo animation
        gsap.from(".logo", {
          duration: 2,
          scale: 0.3,
          y: -200,
          ease: "bounce.out",
          rotation: 10,
        });

        gsap.to(".logo", {
          duration: 1.2,
          rotate: 0,
          ease: "elastic.out(1, 0.3)",
          delay: 2.2
        });

        // GSAP: Title letter split + animation
        const title = document.querySelector(".main-title");
        const text = title.textContent;
        title.innerHTML = text.split("").map(letter => `<span>${letter}</span>`).join("");
        gsap.from(".main-title span", {
          y: -100,
          opacity: 0,
          ease: "bounce.out",
          duration: 1.2,
          stagger: 0.1,
        });

        // GSAP: Background icon animation
        gsap.from(".bg-icons img", {
          duration: 0.8,
          scale: 0,
          rotation: 30,
          ease: "elastic.out(1, 0.4)",
          stagger: 0.05
        });

        // GSAP: Pulse animation on buttons (form + footer)
        gsap.from(".id-form button, .footer button", {
          scale: 0.9,
          opacity: 0,
          duration: 2,
          ease: "back.out(1.7)",
          stagger: 0.1,
        });

        // GSAP: Hover animation on buttons
        document.querySelectorAll(".id-form button, .footer button").forEach((btn) => {
          btn.addEventListener("mouseenter", () => {
            gsap.to(btn, {
              backgroundColor: "#72bfe0", // slightly darker baby blue
              duration: 0.2,
            });
          });

          btn.addEventListener("mouseleave", () => {
            gsap.to(btn, {
              backgroundColor: "#89CFF0", // original baby blue
              duration: 0.2,
            });
          });
        });


        // Copy CA logic
        const btn = document.getElementById("copyCaBtn");
        const caTextElem = document.getElementById("ca-text");
        if (btn && caTextElem) {
          btn.addEventListener("click", () => {
            const raw = caTextElem.innerText;
            const actualCA = raw.replace(/^CA:\s*/, "").trim();
            navigator.clipboard.writeText(actualCA).then(() => alert("CA copied to clipboard!")).catch(() => alert("Failed to copy CA."));
          });
        }
      });
    </script>
  </main>
</body>

</html>